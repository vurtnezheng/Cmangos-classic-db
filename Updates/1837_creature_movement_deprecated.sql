-- Migrated data from deprecated fields in creature_movement and creature_movement_template tables to proper fields and scripts

-- Emotes clean-up
-- Create generice emote DBscripts
-- Idea comes from: https://github.com/cmangos/tbc-db/commit/c59fc0ad865e205329d04eec76ebc5941aea1934
INSERT INTO `dbscripts_on_creature_movement` (`id`,`delay`,`command`,`datalong`,`datalong2`,`datalong3`,`dataint`,`dataint2`,`dataint3`,`dataint4`,`buddy_entry`,`search_radius`,`data_flags`,`comments`,`x`,`y`,`z`,`o`) VALUES
(1007,0,1,7,0,0,0,0,0,0,0,0,0,'GENERIC EMOTE - ONESHOT_EAT',0,0,0,0),
(1028,0,1,28,0,0,0,0,0,0,0,0,0,'GENERIC EMOTE - STATE_WORK_SHEATHED',0,0,0,0),
(1069,0,1,69,0,0,0,0,0,0,0,0,0,'GENERIC EMOTE - STATE_USESTANDING',0,0,0,0),
(1133,0,1,133,0,0,0,0,0,0,0,0,0,'GENERIC EMOTE - STATE_USESTANDING_NOSHEATHE',0,0,0,0),
(1234,0,1,234,0,0,0,0,0,0,0,0,0,'GENERIC EMOTE - STATE_WORK_CHOPWOOD',0,0,0,0);

UPDATE creature_movement_template SET script_id=1000+emote, emote=0 WHERE emote<>0;
UPDATE creature_movement SET script_id=1000+emote, emote=0 WHERE emote<>0;

-- Models clean-up
-- Based on: https://github.com/cmangos/wotlk-db/commit/49d21d2ff8e4eb7d95d5ad12628db7bbcf50474a
UPDATE creature_movement SET script_id=0, model1=0, model2=0 WHERE id IN (80127,80137,80145,80262);
UPDATE creature_movement SET script_id=1126002 WHERE id=80127 AND point=1;
UPDATE creature_movement SET script_id=1126004 WHERE id=80127 AND point=4;
UPDATE creature_movement SET script_id=1234 WHERE id=80127 AND point=7;
UPDATE creature_movement SET script_id=1126002 WHERE id=80137 AND point=1;
UPDATE creature_movement SET script_id=1126004 WHERE id=80137 AND point=3;
UPDATE creature_movement SET script_id=1234 WHERE id=80137 AND point=5;
UPDATE creature_movement SET script_id=1126001 WHERE id=80145 AND point=1;
UPDATE creature_movement SET script_id=1234 WHERE id=80145 AND point=4;
UPDATE creature_movement SET script_id=1126003 WHERE id=80145 AND point=5;
UPDATE creature_movement SET script_id=1126004 WHERE id=80145 AND point=8;
UPDATE creature_movement SET script_id=1126002 WHERE id=80262 AND point=1;
UPDATE creature_movement SET script_id=1126004 WHERE id=80262 AND point=5;
UPDATE creature_movement SET script_id=1234 WHERE id=80262 AND point=9;

DELETE FROM dbscripts_on_creature_movement WHERE id BETWEEN 1126001 AND 1126004;
INSERT INTO dbscripts_on_creature_movement (id, delay, command, datalong, datalong2, buddy_entry, search_radius, data_flags, dataint, dataint2, dataint3, dataint4, x, y, z, o, comments) VALUES
(1126001,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,''),
(1126002,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,''),
(1126002,1,23,89,0,0,0,0x08,0,0,0,0,0,0,0,0,''),
(1126003,1,23,89,0,0,0,0x08,0,0,0,0,0,0,0,0,''),
(1126004,1,23,308,0,0,0,0x08,0,0,0,0,0,0,0,0,'');

-- Texts clean-up
DELETE FROM creature_movement WHERE id=45501;
DELETE FROM creature_movement_template WHERE entry=8666;
INSERT INTO creature_movement_template VALUES
(8666, 0, 1, -8653.18, 899.224, 98.2691, 0, 866601, 0, 0, 0, 0, 0, 0, 0, 3.80752, 0, 0),
(8666, 0, 2, -8697.62, 867.478, 97.0757, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.75963, 0, 0),
(8666, 0, 3, -8709.23, 858.219, 96.9922, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.10913, 0, 0),
(8666, 0, 4, -8724.45, 837.024, 96.1175, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.49396, 0, 0),
(8666, 0, 5, -8728.24, 819.967, 97.0182, 0, 866602, 0, 0, 0, 0, 0, 0, 0, 5.14977, 0, 0),
(8666, 0, 6, -8717.36, 798.062, 97.1434, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.49789, 0, 0),
(8666, 0, 7, -8718.91, 787.365, 97.5009, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.20337, 0, 0),
(8666, 0, 8, -8730.64, 769.457, 98.1241, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.91022, 0, 0),
(8666, 0, 9, -8727.95, 756.073, 98.2564, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5.27935, 0, 0),
(8666, 0, 10, -8719.91, 743.976, 97.8129, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5.01232, 0, 0),
(8666, 0, 11, -8718.33, 737.957, 97.738, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.52931, 0, 0),
(8666, 0, 12, -8719.51, 731.966, 98.4799, 0, 866601, 0, 0, 0, 0, 0, 0, 0, 3.94026, 0, 0),
(8666, 0, 13, -8729.47, 722.483, 101.627, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.88921, 0, 0),
(8666, 0, 14, -8739.51, 714.403, 99.4818, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.23085, 0, 0),
(8666, 0, 15, -8741.15, 710.597, 98.6413, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.81204, 0, 0),
(8666, 0, 16, -8740.56, 705.718, 98.5761, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5.28327, 0, 0),
(8666, 0, 17, -8731.38, 691.896, 98.7298, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5.14976, 0, 0),
(8666, 0, 18, -8727.69, 683.022, 98.7124, 0, 866602, 0, 0, 0, 0, 0, 0, 0, 5.10656, 0, 0),
(8666, 0, 19, -8714.01, 657.03, 99.1495, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5.09085, 0, 0),
(8666, 0, 20, -8708.49, 640.57, 100.125, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.88273, 0, 0),
(8666, 0, 21, -8705.09, 619.45, 100.423, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.50967, 0, 0),
(8666, 0, 22, -8708.19, 602.703, 99.193, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.27406, 0, 0),
(8666, 0, 23, -8711.87, 594.795, 98.688, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.56719, 0, 0),
(8666, 0, 24, -8720.28, 591.141, 98.5069, 0, 866601, 0, 0, 0, 0, 0, 0, 0, 3.89314, 0, 0),
(8666, 0, 25, -8742.45, 568.378, 97.3524, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.94026, 0, 0),
(8666, 0, 26, -8744.32, 563.946, 97.4023, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4.52537, 0, 0),
(8666, 0, 27, -8745.16, 558.113, 97.7023, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5.41679, 0, 0),
(8666, 0, 28, -8732.71, 543.34, 101.114, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5.41287, 0, 0),
(8666, 0, 29, -8716.55, 523.4, 97.8112, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5.91159, 0, 0),
(8666, 0, 30, -8711.94, 521.706, 97.3419, 0, 866602, 0, 0, 0, 0, 0, 0, 0, 0.464855, 0, 0),
(8666, 0, 31, -8698.87, 530.216, 97.7171, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.649424, 0, 0),
(8666, 0, 32, -8679.84, 546.934, 97.5187, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.724036, 0, 0),
(8666, 0, 33, -8674.25, 549.925, 97.3368, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.28814, 0, 0),
(8666, 0, 34, -8659.7, 552.901, 96.9396, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5.85662, 0, 0),
(8666, 0, 35, -8651.76, 550.127, 96.9522, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5.59351, 0, 0),
(8666, 0, 36, -8616.53, 517.14, 103.249, 0, 866601, 0, 0, 0, 0, 0, 0, 0, 5.95086, 0, 0),
(8666, 0, 37, -8611.87, 515.26, 103.722, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.252798, 0, 0),
(8666, 0, 38, -8608.9, 515.955, 104.118, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.771161, 0, 0),
(8666, 0, 39, -8599.19, 525.692, 106.467, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.786869, 0, 0),
(8666, 0, 40, -8585.34, 537.718, 103.244, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.932167, 0, 0),
(8666, 0, 41, -8581.83, 543.508, 101.784, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.6351, 0, 0),
(8666, 0, 42, -8582.3, 553.213, 101.824, 0, 866602, 0, 0, 0, 0, 0, 0, 0, 1.75683, 0, 0),
(8666, 0, 43, -8585.37, 575.163, 103.011, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.21098, 0, 0),
(8666, 0, 44, -8580.77, 592.351, 103.622, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.940021, 0, 0),
(8666, 0, 45, -8567.64, 610.481, 102.648, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.727964, 0, 0),
(8666, 0, 46, -8555.33, 616.441, 102.196, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.590519, 0, 0),
(8666, 0, 47, -8518.08, 644.491, 100.09, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.03034, 0, 0),
(8666, 0, 48, -8513.82, 652.12, 100.292, 0, 866601, 0, 0, 0, 0, 0, 0, 0, 1.51336, 0, 0),
(8666, 0, 49, -8513.83, 658.238, 101.225, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.15739, 0, 0),
(8666, 0, 50, -8521.42, 669.185, 102.733, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.17702, 0, 0),
(8666, 0, 51, -8531.81, 682.955, 98.4889, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.5658, 0, 0),
(8666, 0, 52, -8539.31, 687.432, 97.6786, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.63001, 0, 0),
(8666, 0, 53, -8561.67, 676.016, 97.0151, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.232, 0, 0),
(8666, 0, 54, -8591.08, 708.755, 96.8203, 0, 866602, 0, 0, 0, 0, 0, 0, 0, 2.67182, 0, 0),
(8666, 0, 55, -8599.22, 712.728, 96.6913, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.37868, 0, 0),
(8666, 0, 56, -8610.57, 709.985, 96.7542, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.04096, 0, 0),
(8666, 0, 57, -8616.85, 710.793, 96.7411, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.232, 0, 0),
(8666, 0, 58, -8657.75, 761.698, 96.7242, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.39163, 0, 0),
(8666, 0, 59, -8656.37, 768.553, 96.7037, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.739745, 0, 0),
(8666, 0, 60, -8636.05, 786.187, 96.652, 0, 866601, 0, 0, 0, 0, 0, 0, 0, 1.65081, 0, 0),
(8666, 0, 61, -8637.21, 802.409, 96.6504, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.7804, 0, 0),
(8666, 0, 62, -8643.24, 825.777, 96.6389, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.15346, 0, 0),
(8666, 0, 63, -8678.11, 872.11, 97.0164, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.85894, 0, 0),
(8666, 0, 64, -8679.57, 878.828, 97.0164, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.861481, 0, 0),
(8666, 0, 65, -8650, 901.33, 98.6297, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0.669059, 0, 0);

DELETE FROM dbscripts_on_creature_movement WHERE id IN (866601, 866602);
INSERT INTO dbscripts_on_creature_movement VALUES
(866601, 0, 0, 0, 0, 0, 0, 0, 0, 2000005314, 2000005315, 2000005316, 0, 0, 0, 0, 0, 'Lil Timmy - random say'),
(866602, 0, 0, 0, 0, 0, 0, 0, 0, 2000005317, 2000005318, 2000005319, 0, 0, 0, 0, 0, 'Lil Timmy - random say');

DELETE FROM creature_movement WHERE id IN (13166, 2243);
UPDATE creature SET spawndist=0 WHERE guid=79721;

DELETE FROM dbscript_string WHERE entry IN (2000000199, 2000000201);
INSERT INTO dbscript_string VALUES
(2000000199, 'Hmmm.... Where is my fishing hook? Oh, there it is.', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0, 0, NULL),
(2000000200, 'Let\'s see if the fish are biting.', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0, 0, NULL),
(2000000201, 'Hmmm... I think I need better bait. I\'ll check my father\'s wagon.', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, 0, 0, 0, NULL);

UPDATE dbscripts_on_creature_movement SET dataint=2000000199 WHERE id=1485702 AND delay=5;
UPDATE dbscripts_on_creature_movement SET dataint=2000000200 WHERE id=1485703 AND delay=3;
UPDATE dbscripts_on_creature_movement SET dataint=2000000201 WHERE id=1485703 AND delay=31;
